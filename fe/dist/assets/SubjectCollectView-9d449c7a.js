import{u as J}from"./index.es-4681eddc.js";import{d as Q,u as W,a as X,r as C,C as f,G as y,H as Z,c as ee,e as i,t as s,b as o,w as a,P as te,f as r,D as P,i as n,o as oe,j as u,S as F,K as le,h as ae}from"./index-1ff907d5.js";/* empty css                                                              */const ce={class:"subject-collect-view"},se={class:"subject-collect-header"},ne={style:{display:"flex"}},ie={class:"subject-collect-title"},re={class:"subject-collect-type"},ue={class:"subject-collect-action"},_e={style:{padding:"8px"}},de={style:{"font-weight":"bold"}},me=Q({__name:"SubjectCollectView",setup(be){const{t}=W();X();const S=[{text:t("subjectCollectView.info.subjectCollectProjectFilters.manage_cost"),value:"manage_cost"},{text:t("subjectCollectView.info.subjectCollectProjectFilters.business_cost"),value:"business_cost"},{text:t("subjectCollectView.info.subjectCollectProjectFilters.finance_cost"),value:"finance_cost"},{text:t("subjectCollectView.info.subjectCollectProjectFilters.bonus"),value:"bonus"},{text:t("subjectCollectView.info.subjectCollectProjectFilters.cost_receivable"),value:"cost_receivable"},{text:t("subjectCollectView.info.subjectCollectProjectFilters.cost_payable"),value:"cost_payable"},{text:t("subjectCollectView.info.subjectCollectProjectFilters.other_cost_receivable"),value:"other_cost_receivable"},{text:t("subjectCollectView.info.subjectCollectProjectFilters.cost_allot"),value:"cost_allot"},{text:t("subjectCollectView.info.subjectCollectProjectFilters.cost_real_in"),value:"cost_real_in"},{text:t("subjectCollectView.info.subjectCollectProjectFilters.short_borrow_cost"),value:"short_borrow_cost"},{text:t("subjectCollectView.info.subjectCollectProjectFilters.other_cost_in"),value:"other_cost_in"},{text:t("subjectCollectView.info.subjectCollectProjectFilters.accrual_in"),value:"accrual_in"},{text:t("subjectCollectView.info.subjectCollectProjectFilters.bonus_payable"),value:"bonus_payable"},{text:t("subjectCollectView.info.subjectCollectProjectFilters.other_cost_payable"),value:"other_cost_payable"},{text:t("subjectCollectView.info.subjectCollectProjectFilters.other_cost_out"),value:"other_cost_out"}],$=[{dataIndex:"bank_report_date",key:"bank_report_date",title:t("subjectCollectView.info.bankReportDate"),customFilterDropdown:!0},{dataIndex:"subject_collect_project",key:"subject_collect_project",title:t("subjectCollectView.info.subjectCollectProject"),filters:S},{dataIndex:"accounting_subject",key:"accounting_subject",title:t("subjectCollectView.info.accountingSubject")},{dataIndex:"detail",key:"detail",title:t("subjectCollectView.info.detail")},{dataIndex:"in_price",key:"in_price",title:t("subjectCollectView.info.inPrice")},{dataIndex:"out_price",key:"out_price",title:t("subjectCollectView.info.outPrice")}],b=C(f("bank-pay-currency")||"CNY"),w=e=>{b.value=e,P("bank-pay-currency",e),window.location.reload()},p=C(f("subject-collect-month")?y(f("subject-collect-month")):y()),B=e=>{p.value=e,P("subject-collect-month",y(e).format("YYYY-MM")),window.location.reload()},z=e=>ae.post("/subject/collect/get_list",{pay_currency:b.value,month:p.value,...e}),{data:j,run:I,loading:R,current:Y,pageSize:N,total:D}=J(z,{pagination:{currentKey:"page_index",pageSizeKey:"page_size",totalKey:"data.count"}}),T=Z(()=>({total:D.value,current:Y.value,pageSize:N.value,showSizeChanger:!0})),H=(e,c,d)=>{const m=Object.assign({},c,c.bank_report_date?{bank_report_date:c.bank_report_date[0]}:{});I({page_index:e.current,page_size:e.pageSize,sortField:d.field,sortOrder:d.order,...m})},h=e=>{e()},K=e=>{e({confirm:!0})};C(!1),C({});const M=()=>{};return(e,c)=>{var g,k;const d=n("a-radio-button"),m=n("a-radio-group"),E=n("a-date-picker"),v=n("a-button"),O=n("a-input"),_=n("a-table-summary-cell"),L=n("a-table-summary-row"),U=n("a-table");return oe(),ee("div",ce,[i("div",se,[i("div",ne,[i("div",ie,s(e.$t("route.reports.subjectCollect")),1),i("div",re,[o(m,{value:b.value,"onUpdate:value":c[2]||(c[2]=l=>b.value=l)},{default:a(()=>[o(d,{value:"CNY",onClick:c[0]||(c[0]=l=>w("CNY"))},{default:a(()=>[u(s(e.$t("subjectCollectView.actions.selectCNYBankReport")),1)]),_:1}),o(d,{value:"THB",onClick:c[1]||(c[1]=l=>w("THB"))},{default:a(()=>[u(s(e.$t("subjectCollectView.actions.selectTHBBankReport")),1)]),_:1})]),_:1},8,["value"]),o(E,{value:p.value,"onUpdate:value":c[3]||(c[3]=l=>p.value=l),picker:"month",placeholder:e.$t("common.actions.monthSelectPlaceholder"),style:{"margin-left":"16px"},allowClear:!1,onChange:B},null,8,["value","placeholder"])])]),i("div",ue,[o(v,{type:"primary",style:{"margin-left":"16px"},onClick:M,disabled:""},{default:a(()=>[u(s(e.$t("subjectCollectView.actions.downloadBankReport")),1)]),_:1})])]),o(U,{columns:$,"row-key":l=>l.id,"data-source":(g=r(j))==null?void 0:g.data.rows,locale:{filterConfirm:e.$t("common.actions.confirm"),filterReset:e.$t("common.actions.reset")},pagination:T.value,loading:r(R),onChange:H},te({customFilterIcon:a(({filtered:l})=>[o(r(F),{style:le({color:l?"#108ee9":void 0})},null,8,["style"])]),customFilterDropdown:a(({setSelectedKeys:l,selectedKeys:q,confirm:V,clearFilters:G,column:A})=>[i("div",_e,[o(O,{placeholder:`${e.$t("common.actions.search")}${A.title}`,value:q[0],style:{width:"188px","margin-bottom":"8px",display:"block"},onChange:x=>l(x.target.value?[x.target.value]:[]),onPressEnter:()=>h(V)},null,8,["placeholder","value","onChange","onPressEnter"]),o(v,{type:"primary",size:"small",style:{width:"90px","margin-right":"8px"},onClick:()=>h(V)},{icon:a(()=>[o(r(F))]),default:a(()=>[u(" "+s(e.$t("common.actions.search")),1)]),_:2},1032,["onClick"]),o(v,{size:"small",style:{width:"90px"},onClick:()=>K(G)},{default:a(()=>[u(s(e.$t("common.actions.reset")),1)]),_:2},1032,["onClick"])])]),_:2},[(k=r(j))!=null&&k.data.count?{name:"summary",fn:a(()=>[o(L,null,{default:a(()=>[o(_,null,{default:a(()=>[i("span",de,s(e.$t("subjectCollectView.info.total")),1)]),_:1}),o(_),o(_),o(_),o(_,null,{default:a(()=>{var l;return[u(s((l=r(j))==null?void 0:l.data.in_total),1)]}),_:1}),o(_,null,{default:a(()=>{var l;return[u(s((l=r(j))==null?void 0:l.data.out_total),1)]}),_:1})]),_:1})]),key:"0"}:void 0]),1032,["row-key","data-source","locale","pagination","loading"])])}}});export{me as default};
